#Implement transmission of ping messages/trace route over a network topology consisting of 6 nodes and find the number of packets dropped due to congestion.

set ns [new Simulator]
set nf [open lab2.nam w]
$ns namtrace-all
$nf set tf [openlab2.tr w]
Sns trace-all
$tf set no [Snsnode] 
set n1 [$ns node] 
set n2 [$ns node]
set n3 [$nsnode] 
set n4 [Sns node] 
set n5 [$ns node]
$n4 shape box
Sns duplex-link $n0 5n4 1005Mb 1ms DropTail
$ns duplex-link Snl $n4 50Mb 1ms DropTail
Sns duplex-link $n2 $n4 2000Mb 1ms DropTail
$ns duplex-link $n3 $n4 200Mb 1ms Drop Tail
$ns duplex-link $n4 $n5 1Mb 1ms DropTail
set pl [new Agent/Ping]
$ns attach-agent $n0 $p1
$p1 set packetSize_50000
$p1 set interval_0.0001
set p2 [new Agent/Ping]
$ns attach-agent $nl $p2 set p3 [new Agent/Ping]
$ns attach-agent $n2 $p3
$p3 set packetSize_30000
$p3 set interval_ 0.00001
set p4 [new Agent/Ping]
$ns attach-agent $n3 $p4
set p4 [new Agent/Ping]
$ns attach-agent $n5 $p5
$ns queue-limit $n0 $n4 5
$ns queue-limit $n2 Sn4 3
$ns queue-limit $n4 Sn5 2
Agent/Ping instproc reev {from rtt} {
$self instvar node_
puts "node [$node_id] received answer from $from with round trip time Srtt msec"
}

